document.addEventListener('DOMContentLoaded',function(){const header=document.querySelector('header');const mobileMenuToggle=document.querySelector('.mobile-menu-toggle');const headerActions=document.querySelector('.header__actions');const searchContainer=document.querySelector('.search-container');let isMenuOpen=false;const searchInput=document.querySelector('#subject-search');const subjectItems=document.querySelectorAll('.subject-list li');let searchTimeout;window.addEventListener('scroll',()=>{if(window.scrollY>50){header.classList.add('scrolled');}else{header.classList.remove('scrolled');}});mobileMenuToggle.addEventListener('click',()=>{isMenuOpen=!isMenuOpen;headerActions.classList.toggle('active');searchContainer.classList.toggle('active');mobileMenuToggle.setAttribute('aria-expanded',isMenuOpen);const icon=mobileMenuToggle.querySelector('i');if(isMenuOpen){icon.classList.remove('fa-bars');icon.classList.add('fa-times');}else{icon.classList.remove('fa-times');icon.classList.add('fa-bars');}});document.addEventListener('click',(event)=>{const isClickInsideHeader=header.contains(event.target);if(!isClickInsideHeader&&isMenuOpen){isMenuOpen=false;headerActions.classList.remove('active');searchContainer.classList.remove('active');mobileMenuToggle.setAttribute('aria-expanded',false);const icon=mobileMenuToggle.querySelector('i');icon.classList.remove('fa-times');icon.classList.add('fa-bars');}});let resizeTimer;window.addEventListener('resize',()=>{clearTimeout(resizeTimer);resizeTimer=setTimeout(()=>{if(window.innerWidth>768&&isMenuOpen){isMenuOpen=false;headerActions.classList.remove('active');searchContainer.classList.remove('active');mobileMenuToggle.setAttribute('aria-expanded',false);const icon=mobileMenuToggle.querySelector('i');icon.classList.remove('fa-times');icon.classList.add('fa-bars');}},250);});if(searchInput&&subjectItems.length>0){function highlightMatch(item,searchTerm){if(searchTerm===''){item.querySelector('.short-form').innerHTML=item.querySelector('.short-form').textContent;item.querySelector('.full-name').innerHTML=item.querySelector('.full-name').textContent;return;}const highlightText=(text,term)=>{const regex=new RegExp(`(${term})`,'gi');return text.replace(regex,'<mark style="background-color: rgba(45,118,204,0.2);color: var(--text-primary);padding: 0 2px;border-radius: 2px;">$1</mark>');};const shortForm=item.querySelector('.short-form');const fullName=item.querySelector('.full-name');shortForm.innerHTML=highlightText(shortForm.textContent,searchTerm);fullName.innerHTML=highlightText(fullName.textContent,searchTerm);}function performSearch(){const searchTerm=searchInput.value.toLowerCase().trim();subjectItems.forEach(item=>{const shortForm=item.querySelector('.short-form').textContent.toLowerCase();const fullName=item.querySelector('.full-name').textContent.toLowerCase();if(shortForm.includes(searchTerm)||fullName.includes(searchTerm)){item.classList.remove('hidden');highlightMatch(item,searchTerm);}else{item.classList.add('hidden');}});const allHidden=Array.from(subjectItems).every(item=>item.classList.contains('hidden'));let noResultsMsg=document.querySelector('.no-results-message');if(allHidden&&searchTerm!==''){if(!noResultsMsg){noResultsMsg=document.createElement('div');noResultsMsg.className='no-results-message';noResultsMsg.style.textAlign='center';noResultsMsg.style.padding='2rem';noResultsMsg.style.color='var(--text-muted)';subjectItems[0].parentNode.appendChild(noResultsMsg);}noResultsMsg.textContent=`No subjects found matching "${searchInput.value}"`;noResultsMsg.style.display='block';}else if(noResultsMsg){noResultsMsg.style.display='none';}}searchInput.addEventListener('input',function(){clearTimeout(searchTimeout);searchTimeout=setTimeout(performSearch,300);});searchInput.addEventListener('search',performSearch);if(searchInput.value){performSearch();}}});